<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Dashboard - Estoque</title>

<style>
body{
    margin:0;
    font-family:Arial, Helvetica, sans-serif;
    background:#0f172a;
    color:white;
}

/* TOPO */
header{
    background:#020617;
    padding:15px;
    display:flex;
    align-items:center;
    gap:15px;
    border-bottom:2px solid #1e293b;
}

header img{
    height:50px;
}

header h1{
    font-size:22px;
    margin:0;
}

/* CONTAINER */
.container{
    padding:20px;
}

/* TABELA */
table{
    width:100%;
    border-collapse:collapse;
    background:#020617;
    border-radius:10px;
    overflow:hidden;
}

th{
    background:#1e293b;
    padding:12px;
    text-align:left;
}

td{
    padding:10px;
    border-bottom:1px solid #1e293b;
}

tr:hover{
    background:#0f172a;
}

/* STATUS */
.status{
    padding:5px 10px;
    border-radius:6px;
    font-weight:bold;
}

.entregue{
    background:#16a34a;
}

.pendente{
    background:#f59e0b;
}

/* ASSINATURA */
.assinatura{
    width:120px;
    border-radius:6px;
    background:white;
}
</style>
</head>

<body>

<header>
    <!-- TROQUE PELO SEU LOGO -->
    <img src="LOGO_AQUI.png">
    <h1>Controle de Estoque</h1>
</header>

<div class="container">

<table>
<thead>
<tr>
    <th>Data</th>
    <th>Nome</th>
    <th>CPF</th>
    <th>Telefone</th>
    <th>Posto</th>
    <th>Uniformes</th>
    <th>Status</th>
    <th>Assinatura</th>
</tr>
</thead>

<tbody id="tabela"></tbody>

</table>

</div>

<script>

const URL_SCRIPT = "https://script.google.com/macros/s/AKfycbwIPsU0ef84l2J-G3WPaASZ7fhAyj72dg7dN08tQYGn7YP7t2YcU39jbzGWoedwQYgMTw/exec";

/* ===========================
   CARREGAR DADOS
=========================== */
async function carregarDados(){

    const resposta = await fetch(URL_SCRIPT);
    const dados = await resposta.json();

    const tabela = document.getElementById("tabela");
    tabela.innerHTML = "";

    dados.reverse().forEach(item => {

        const tr = document.createElement("tr");

        /* STATUS */
        let classeStatus = "pendente";
        if(item.status && item.status.toLowerCase() === "entregue"){
            classeStatus = "entregue";
        }

        /* ASSINATURA */
        let assinaturaHTML = "Pendente";

        if(
            item.assinatura &&
            item.assinatura !== "" &&
            item.assinatura !== "Pendente" &&
            item.assinatura.startsWith("data:image")
        ){
            assinaturaHTML =
                `<img src="${item.assinatura}" class="assinatura">`;
        }

        tr.innerHTML = `
            <td>${item.data || ""}</td>
            <td>${item.nome || ""}</td>
            <td>${item.cpf || ""}</td>
            <td>${item.telefone || ""}</td>
            <td>${item.posto || ""}</td>
            <td>${item.uniformes || ""}</td>
            <td>
                <span class="status ${classeStatus}">
                    ${item.status || "Pendente"}
                </span>
            </td>
            <td>${assinaturaHTML}</td>
        `;

        tabela.appendChild(tr);
    });
}

/* carregar autom√°tico */
carregarDados();

/* atualizar sozinho a cada 10s */
setInterval(carregarDados,10000);

</script>

</body>
</html>